(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[444],{7042:function(e,t,s){Promise.resolve().then(s.bind(s,4916))},9560:function(e,t,s){"use strict";s.r(t),s.d(t,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth}});var r=s(7437),a=s(2265),i=s(4033);let n=(0,a.createContext)(void 0);function AuthProvider(e){let{children:t}=e,[s,l]=(0,a.useState)(null),[o,c]=(0,a.useState)(!0),u=(0,i.useRouter)();(0,a.useEffect)(()=>{checkAuth()},[]);let checkAuth=async()=>{try{let e=localStorage.getItem("token");if(!e){c(!1);return}let t=await fetch("/api/auth/me",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();l(e)}else localStorage.removeItem("token")}catch(e){console.error("Auth check failed:",e),localStorage.removeItem("token")}finally{c(!1)}},login=async(e,t)=>{try{let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),r=await s.json();if(s.ok)return localStorage.setItem("token",r.token),l(r.user),{success:!0,message:"Login successful"};return{success:!1,message:r.message||"Login failed"}}catch(e){return{success:!1,message:"Network error"}}},register=async e=>{try{let t=new AbortController,s=setTimeout(()=>t.abort(),15e3),r=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),signal:t.signal});clearTimeout(s);let a={};try{a=await r.json()}catch(e){}if(r.ok)return{success:!0,message:"Registration successful"};{let e=(null==a?void 0:a.message)||"Request failed (".concat(r.status,")");return{success:!1,message:e}}}catch(e){if((null==e?void 0:e.name)==="AbortError")return{success:!1,message:"Request timed out. Please try again."};return{success:!1,message:(null==e?void 0:e.message)||"Network error"}}},claimAdmin=async(e,t)=>{try{let s=await fetch("/api/auth/claim-admin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,code:t})}),r=await s.json();if(s.ok)return localStorage.setItem("token",r.token),l(r.user),{success:!0,message:"Admin access granted"};return{success:!1,message:r.message||"Admin claim failed"}}catch(e){return{success:!1,message:"Network error"}}};return(0,r.jsx)(n.Provider,{value:{user:s,loading:o,login,register,logout:()=>{localStorage.removeItem("token"),l(null),u.push("/")},claimAdmin},children:t})}function useAuth(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},4916:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return MenteeDashboard}});var r=s(7437),a=s(2265),i=s(9560),n=s(4033);function MenteeDashboard(){let{user:e}=(0,i.useAuth)(),t=(0,n.useRouter)(),[s,l]=(0,a.useState)([]),[o,c]=(0,a.useState)(!0),[u,d]=(0,a.useState)(""),[m,h]=(0,a.useState)("");(0,a.useEffect)(()=>{if(e&&"MENTEE"!==e.role){t.push("/");return}fetchMentors()},[e,t]);let fetchMentors=async()=>{try{let e=localStorage.getItem("token"),t=await fetch("/api/mentors",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();l(e)}}catch(e){console.error("Failed to fetch mentors:",e)}finally{c(!1)}},requestMentorship=async e=>{let t=prompt("Why would you like this mentor to guide you?");if(t)try{let s=localStorage.getItem("token"),r=await fetch("/api/mentor-requests",{method:"POST",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},body:JSON.stringify({mentorId:e,message:t})});if(r.ok)alert("Mentorship request sent successfully!");else{let e=await r.json();alert(e.message||"Failed to send request")}}catch(e){console.error("Failed to send request:",e),alert("Failed to send request")}},x=s.filter(e=>{let t=e.user.firstName.toLowerCase().includes(u.toLowerCase())||e.user.lastName.toLowerCase().includes(u.toLowerCase())||e.bio.toLowerCase().includes(u.toLowerCase()),s=!m||e.expertise.some(e=>e.toLowerCase().includes(m.toLowerCase()));return t&&s});return e&&"MENTEE"===e.role?o?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("header",{className:"bg-white shadow-sm",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Find Your Mentor"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Connect with experienced diaspora professionals"})]}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{onClick:()=>t.push("/"),className:"btn-secondary",children:"Home"}),(0,r.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),t.push("/")},className:"btn-danger",children:"Logout"})]})]})})}),(0,r.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsx)("div",{className:"card mb-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-2",children:"Search mentors"}),(0,r.jsx)("input",{type:"text",id:"search",className:"input-field",placeholder:"Search by name or bio...",value:u,onChange:e=>d(e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"expertise",className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by expertise"}),(0,r.jsx)("input",{type:"text",id:"expertise",className:"input-field",placeholder:"e.g., Software Engineering, Business",value:m,onChange:e=>h(e.target.value)})]})]})}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(e=>(0,r.jsxs)("div",{className:"card",children:[(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center",children:(0,r.jsxs)("span",{className:"text-primary-600 font-semibold",children:[e.user.firstName[0],e.user.lastName[0]]})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:[e.user.firstName," ",e.user.lastName]}),(0,r.jsx)("p",{className:"text-gray-600",children:e.location})]})]}),(0,r.jsx)("p",{className:"text-gray-700 mb-4 line-clamp-3",children:e.bio}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Expertise:"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:e.expertise.map((e,t)=>(0,r.jsx)("span",{className:"px-2 py-1 bg-primary-100 text-primary-800 text-sm rounded-full",children:e},t))})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Languages:"}),(0,r.jsx)("p",{className:"text-gray-600",children:e.languages.join(", ")})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Availability:"}),(0,r.jsx)("p",{className:"text-gray-600",children:e.availability})]}),(0,r.jsx)("button",{onClick:()=>requestMentorship(e.id),className:"w-full btn-primary",children:"Request Mentorship"})]},e.id))}),0===x.length&&(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-gray-500 text-lg",children:"No mentors found matching your criteria."})})]})]}):(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),(0,r.jsx)("p",{children:"You don't have permission to access this page."})]})})}},622:function(e,t,s){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=s(2265),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,s){var r,i={},c=null,u=null;for(r in void 0!==s&&(c=""+s),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)n.call(t,r)&&!o.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:u,props:i,_owner:l.current}}t.Fragment=i,t.jsx=q,t.jsxs=q},7437:function(e,t,s){"use strict";e.exports=s(622)},4033:function(e,t,s){e.exports=s(94)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=7042)}),_N_E=e.O()}]);