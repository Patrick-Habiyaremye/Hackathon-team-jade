(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[393],{8259:function(e,t,s){Promise.resolve().then(s.bind(s,9379))},9560:function(e,t,s){"use strict";s.r(t),s.d(t,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth}});var a=s(7437),r=s(2265),n=s(4033);let c=(0,r.createContext)(void 0);function AuthProvider(e){let{children:t}=e,[s,l]=(0,r.useState)(null),[i,o]=(0,r.useState)(!0),d=(0,n.useRouter)();(0,r.useEffect)(()=>{checkAuth()},[]);let checkAuth=async()=>{try{let e=localStorage.getItem("token");if(!e){o(!1);return}let t=await fetch("/api/auth/me",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();l(e)}else localStorage.removeItem("token")}catch(e){console.error("Auth check failed:",e),localStorage.removeItem("token")}finally{o(!1)}},login=async(e,t)=>{try{let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),a=await s.json();if(s.ok)return localStorage.setItem("token",a.token),l(a.user),{success:!0,message:"Login successful"};return{success:!1,message:a.message||"Login failed"}}catch(e){return{success:!1,message:"Network error"}}},register=async e=>{try{let t=new AbortController,s=setTimeout(()=>t.abort(),15e3),a=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),signal:t.signal});clearTimeout(s);let r={};try{r=await a.json()}catch(e){}if(a.ok)return{success:!0,message:"Registration successful"};{let e=(null==r?void 0:r.message)||"Request failed (".concat(a.status,")");return{success:!1,message:e}}}catch(e){if((null==e?void 0:e.name)==="AbortError")return{success:!1,message:"Request timed out. Please try again."};return{success:!1,message:(null==e?void 0:e.message)||"Network error"}}},claimAdmin=async(e,t)=>{try{let s=await fetch("/api/auth/claim-admin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,code:t})}),a=await s.json();if(s.ok)return localStorage.setItem("token",a.token),l(a.user),{success:!0,message:"Admin access granted"};return{success:!1,message:a.message||"Admin claim failed"}}catch(e){return{success:!1,message:"Network error"}}};return(0,a.jsx)(c.Provider,{value:{user:s,loading:i,login,register,logout:()=>{localStorage.removeItem("token"),l(null),d.push("/")},claimAdmin},children:t})}function useAuth(){let e=(0,r.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9379:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return MentorDashboard}});var a=s(7437),r=s(2265),n=s(9560),c=s(4033);function MentorDashboard(){let{user:e}=(0,n.useAuth)(),t=(0,c.useRouter)(),[s,l]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(!e)return;if("MENTOR"!==e.role){t.push("/");return}let fetchData=async()=>{await fetchRequests()};fetchData()},[e,t]);let fetchRequests=async()=>{let e=localStorage.getItem("token");if(!e){t.push("/login");return}try{let t=await fetch("/api/mentor-requests",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();l(e)}}catch(e){console.error("Failed to fetch requests:",e)}finally{o(!1)}},handleRequestAction=async(e,s)=>{let a="accept"===s?prompt("Add a response message (optional):"):prompt("Add a reason for rejection (optional):"),r=localStorage.getItem("token");if(!r){t.push("/login");return}try{let t=await fetch("/api/mentor-requests/".concat(e,"/").concat(s),{method:"PATCH",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify({response:a})});if(t.ok)await fetchRequests(),alert("Request ".concat(s,"ed successfully!"));else{let e=await t.json();alert(e.message||"Failed to ".concat(s," request"))}}catch(e){console.error("Failed to ".concat(s," request:"),e),alert("Failed to ".concat(s," request"))}};if(!e||"MENTOR"!==e.role)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),(0,a.jsx)("p",{children:"You don't have permission to access this page."})]})});if(i)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})});let d=s.filter(e=>"PENDING"===e.status),m=s.filter(e=>"ACCEPTED"===e.status),u=s.filter(e=>"REJECTED"===e.status);return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Mentor Dashboard"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage your mentorship requests"})]}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsx)("button",{onClick:()=>t.push("/"),className:"btn-secondary",children:"Home"}),(0,a.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),t.push("/")},className:"btn-danger",children:"Logout"})]})]})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Pending Requests"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-warning-600",children:d.length})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Accepted"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-success-600",children:m.length})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Rejected"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-danger-600",children:u.length})]})]}),d.length>0&&(0,a.jsxs)("div",{className:"card mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Pending Requests"}),(0,a.jsx)("div",{className:"space-y-4",children:d.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:[e.mentee.firstName," ",e.mentee.lastName]}),(0,a.jsx)("p",{className:"text-gray-600",children:e.mentee.email}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Requested on ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,a.jsx)("span",{className:"px-3 py-1 bg-warning-100 text-warning-800 rounded-full text-sm font-medium",children:"PENDING"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Message:"}),(0,a.jsx)("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg",children:e.message})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{onClick:()=>handleRequestAction(e.id,"accept"),className:"btn-success",children:"Accept"}),(0,a.jsx)("button",{onClick:()=>handleRequestAction(e.id,"reject"),className:"btn-danger",children:"Reject"})]})]},e.id))})]}),m.length>0&&(0,a.jsxs)("div",{className:"card mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Accepted Requests"}),(0,a.jsx)("div",{className:"space-y-4",children:m.map(e=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-6",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:[e.mentee.firstName," ",e.mentee.lastName]}),(0,a.jsx)("p",{className:"text-gray-600",children:e.mentee.email}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Accepted on ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,a.jsx)("span",{className:"px-3 py-1 bg-success-100 text-success-800 rounded-full text-sm font-medium",children:"ACCEPTED"})]})},e.id))})]}),u.length>0&&(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Rejected Requests"}),(0,a.jsx)("div",{className:"space-y-4",children:u.map(e=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-6",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:[e.mentee.firstName," ",e.mentee.lastName]}),(0,a.jsx)("p",{className:"text-gray-600",children:e.mentee.email}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Rejected on ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,a.jsx)("span",{className:"px-3 py-1 bg-danger-100 text-danger-800 rounded-full text-sm font-medium",children:"REJECTED"})]})},e.id))})]}),0===s.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("p",{className:"text-gray-500 text-lg",children:"No mentorship requests yet."}),(0,a.jsx)("p",{className:"text-gray-400",children:"Mentees will appear here when they request your guidance."})]})]})]})}},622:function(e,t,s){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a=s(2265),r=Symbol.for("react.element"),n=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,l=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,s){var a,n={},o=null,d=null;for(a in void 0!==s&&(o=""+s),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(d=t.ref),t)c.call(t,a)&&!i.hasOwnProperty(a)&&(n[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===n[a]&&(n[a]=t[a]);return{$$typeof:r,type:e,key:o,ref:d,props:n,_owner:l.current}}t.Fragment=n,t.jsx=q,t.jsxs=q},7437:function(e,t,s){"use strict";e.exports=s(622)},4033:function(e,t,s){e.exports=s(94)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=8259)}),_N_E=e.O()}]);