(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{8939:function(e,t,s){Promise.resolve().then(s.bind(s,5970))},5970:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return AdminDashboard}});var a=s(7437),n=s(2265),r=s(9560),i=s(4033);function AdminDashboard(){let{user:e}=(0,r.useAuth)(),t=(0,i.useRouter)(),[s,c]=(0,n.useState)([]),[l,o]=(0,n.useState)(!0);(0,n.useEffect)(()=>{if(e&&!e.isAdmin){t.push("/");return}fetchApplications()},[e,t]);let fetchApplications=async()=>{try{let e=localStorage.getItem("token"),t=await fetch("/api/admin/mentor-applications",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();c(e)}}catch(e){console.error("Failed to fetch applications:",e)}finally{o(!1)}},handleApplicationAction=async(e,t)=>{try{let s=localStorage.getItem("token"),a=await fetch("/api/admin/mentor-applications/".concat(e,"/").concat(t),{method:"PATCH",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"}});if(a.ok)await fetchApplications();else{let e=await a.json();alert(e.message||"Failed to update application")}}catch(e){console.error("Failed to update application:",e),alert("Failed to update application")}};return e&&e.isAdmin?l?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage mentor applications and platform settings"})]}),(0,a.jsx)("button",{onClick:()=>t.push("/"),className:"btn-secondary",children:"Back to Home"})]})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Pending Applications"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-warning-600",children:s.filter(e=>"PENDING"===e.status).length})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Approved Mentors"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-success-600",children:s.filter(e=>"APPROVED"===e.status).length})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Rejected Applications"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-danger-600",children:s.filter(e=>"REJECTED"===e.status).length})]})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Mentor Applications"}),0===s.length?(0,a.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No applications found"}):(0,a.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:[e.user.firstName," ",e.user.lastName]}),(0,a.jsx)("p",{className:"text-gray-600",children:e.user.email}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Applied on ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat("PENDING"===e.status?"bg-warning-100 text-warning-800":"APPROVED"===e.status?"bg-success-100 text-success-800":"bg-danger-100 text-danger-800"),children:e.status})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Application Message:"}),(0,a.jsx)("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg",children:e.message})]}),"PENDING"===e.status&&(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{onClick:()=>handleApplicationAction(e.id,"approve"),className:"btn-success",children:"Approve"}),(0,a.jsx)("button",{onClick:()=>handleApplicationAction(e.id,"reject"),className:"btn-danger",children:"Reject"})]})]},e.id))})]})]})]}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),(0,a.jsx)("p",{children:"You don't have permission to access this page."})]})})}},9560:function(e,t,s){"use strict";s.r(t),s.d(t,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth}});var a=s(7437),n=s(2265),r=s(4033);let i=(0,n.createContext)(void 0);function AuthProvider(e){let{children:t}=e,[s,c]=(0,n.useState)(null),[l,o]=(0,n.useState)(!0),d=(0,r.useRouter)();(0,n.useEffect)(()=>{checkAuth()},[]);let checkAuth=async()=>{try{let e=localStorage.getItem("token");if(!e){o(!1);return}let t=await fetch("/api/auth/me",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();c(e)}else localStorage.removeItem("token")}catch(e){console.error("Auth check failed:",e),localStorage.removeItem("token")}finally{o(!1)}},login=async(e,t)=>{try{let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),a=await s.json();if(s.ok)return localStorage.setItem("token",a.token),c(a.user),{success:!0,message:"Login successful"};return{success:!1,message:a.message||"Login failed"}}catch(e){return{success:!1,message:"Network error"}}},register=async e=>{try{let t=new AbortController,s=setTimeout(()=>t.abort(),15e3),a=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),signal:t.signal});clearTimeout(s);let n={};try{n=await a.json()}catch(e){}if(a.ok)return{success:!0,message:"Registration successful"};{let e=(null==n?void 0:n.message)||"Request failed (".concat(a.status,")");return{success:!1,message:e}}}catch(e){if((null==e?void 0:e.name)==="AbortError")return{success:!1,message:"Request timed out. Please try again."};return{success:!1,message:(null==e?void 0:e.message)||"Network error"}}},claimAdmin=async(e,t)=>{try{let s=await fetch("/api/auth/claim-admin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,code:t})}),a=await s.json();if(s.ok)return localStorage.setItem("token",a.token),c(a.user),{success:!0,message:"Admin access granted"};return{success:!1,message:a.message||"Admin claim failed"}}catch(e){return{success:!1,message:"Network error"}}};return(0,a.jsx)(i.Provider,{value:{user:s,loading:l,login,register,logout:()=>{localStorage.removeItem("token"),c(null),d.push("/")},claimAdmin},children:t})}function useAuth(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},622:function(e,t,s){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a=s(2265),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,c=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,s){var a,r={},o=null,d=null;for(a in void 0!==s&&(o=""+s),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,a)&&!l.hasOwnProperty(a)&&(r[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===r[a]&&(r[a]=t[a]);return{$$typeof:n,type:e,key:o,ref:d,props:r,_owner:c.current}}t.Fragment=r,t.jsx=q,t.jsxs=q},7437:function(e,t,s){"use strict";e.exports=s(622)},4033:function(e,t,s){e.exports=s(94)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=8939)}),_N_E=e.O()}]);