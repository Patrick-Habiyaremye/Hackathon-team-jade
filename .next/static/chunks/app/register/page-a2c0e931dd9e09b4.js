(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{7504:function(e,t,a){Promise.resolve().then(a.bind(a,7778))},9560:function(e,t,a){"use strict";a.r(t),a.d(t,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth}});var s=a(7437),n=a(2265),r=a(4033);let i=(0,n.createContext)(void 0);function AuthProvider(e){let{children:t}=e,[a,l]=(0,n.useState)(null),[o,c]=(0,n.useState)(!0),m=(0,r.useRouter)();(0,n.useEffect)(()=>{checkAuth()},[]);let checkAuth=async()=>{try{let e=localStorage.getItem("token");if(!e){c(!1);return}let t=await fetch("/api/auth/me",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();l(e)}else localStorage.removeItem("token")}catch(e){console.error("Auth check failed:",e),localStorage.removeItem("token")}finally{c(!1)}},login=async(e,t)=>{try{let a=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),s=await a.json();if(a.ok)return localStorage.setItem("token",s.token),l(s.user),{success:!0,message:"Login successful"};return{success:!1,message:s.message||"Login failed"}}catch(e){return{success:!1,message:"Network error"}}},register=async e=>{try{let t=new AbortController,a=setTimeout(()=>t.abort(),15e3),s=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),signal:t.signal});clearTimeout(a);let n={};try{n=await s.json()}catch(e){}if(s.ok)return{success:!0,message:"Registration successful"};{let e=(null==n?void 0:n.message)||"Request failed (".concat(s.status,")");return{success:!1,message:e}}}catch(e){if((null==e?void 0:e.name)==="AbortError")return{success:!1,message:"Request timed out. Please try again."};return{success:!1,message:(null==e?void 0:e.message)||"Network error"}}},claimAdmin=async(e,t)=>{try{let a=await fetch("/api/auth/claim-admin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,code:t})}),s=await a.json();if(a.ok)return localStorage.setItem("token",s.token),l(s.user),{success:!0,message:"Admin access granted"};return{success:!1,message:s.message||"Admin claim failed"}}catch(e){return{success:!1,message:"Network error"}}};return(0,s.jsx)(i.Provider,{value:{user:a,loading:o,login,register,logout:()=>{localStorage.removeItem("token"),l(null),m.push("/")},claimAdmin},children:t})}function useAuth(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},7778:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return RegisterPage}});var s=a(7437),n=a(2265),r=a(9560),i=a(4033),l=a(1396),o=a.n(l);function RegisterPage(){let[e,t]=(0,n.useState)({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",type:"mentee",bio:"",location:"",education:"",experience:"",expertise:"",goals:"",interests:"",languages:"",availability:""}),[a,l]=(0,n.useState)(!1),[c,m]=(0,n.useState)(""),{register:d}=(0,r.useAuth)(),u=(0,i.useRouter)(),h=(0,i.useSearchParams)();(0,n.useEffect)(()=>{let e=h.get("type");("mentor"===e||"mentee"===e)&&t(t=>({...t,type:e}))},[h]);let handleSubmit=async t=>{if(t.preventDefault(),l(!0),m(""),e.password!==e.confirmPassword){m("Passwords do not match"),l(!1);return}let a=await d({...e,type:e.type,expertise:e.expertise?e.expertise.split(",").map(e=>e.trim()):[],goals:e.goals?e.goals.split(",").map(e=>e.trim()):[],interests:e.interests?e.interests.split(",").map(e=>e.trim()):[],languages:e.languages?e.languages.split(",").map(e=>e.trim()):[]});a.success?u.push("/"):m(a.message),l(!1)},handleChange=e=>{t(t=>({...t,[e.target.name]:e.target.value}))};return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h2",{className:"text-3xl font-extrabold text-gray-900",children:"Create your account"}),(0,s.jsx)("p",{className:"mt-2 text-gray-600",children:"Join the Diaspora Bridge community"})]}),(0,s.jsxs)("form",{className:"space-y-6",onSubmit:handleSubmit,children:[(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"I want to:"}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 mb-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>t(e=>({...e,type:"mentee"})),className:"w-full sm:w-1/2 px-4 py-3 rounded-lg border transition-colors ".concat("mentee"===e.type?"bg-primary-600 text-white border-primary-600":"bg-dark-800 text-white border-gray-700 hover:border-primary-600"),children:"Become a Mentee"}),(0,s.jsx)("button",{type:"button",onClick:()=>t(e=>({...e,type:"mentor"})),className:"w-full sm:w-1/2 px-4 py-3 rounded-lg border transition-colors ".concat("mentor"===e.type?"bg-primary-600 text-white border-primary-600":"bg-dark-800 text-white border-gray-700 hover:border-primary-600"),children:"Become a Mentor"})]}),(0,s.jsx)("input",{type:"hidden",name:"type",value:e.type})]}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:"First Name"}),(0,s.jsx)("input",{type:"text",name:"firstName",id:"firstName",required:!0,className:"input-field mt-1",value:e.firstName,onChange:handleChange})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:"Last Name"}),(0,s.jsx)("input",{type:"text",name:"lastName",id:"lastName",required:!0,className:"input-field mt-1",value:e.lastName,onChange:handleChange})]})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),(0,s.jsx)("input",{type:"email",name:"email",id:"email",required:!0,className:"input-field mt-1",value:e.email,onChange:handleChange})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,s.jsx)("input",{type:"password",name:"password",id:"password",required:!0,className:"input-field mt-1",value:e.password,onChange:handleChange})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),(0,s.jsx)("input",{type:"password",name:"confirmPassword",id:"confirmPassword",required:!0,className:"input-field mt-1",value:e.confirmPassword,onChange:handleChange})]})]}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-700",children:"Bio"}),(0,s.jsx)("textarea",{name:"bio",id:"bio",rows:3,className:"input-field mt-1",placeholder:"Tell us about yourself...",value:e.bio,onChange:handleChange})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700",children:"Location"}),(0,s.jsx)("input",{type:"text",name:"location",id:"location",className:"input-field mt-1",placeholder:"City, Country",value:e.location,onChange:handleChange})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"education",className:"block text-sm font-medium text-gray-700",children:"Education"}),(0,s.jsx)("input",{type:"text",name:"education",id:"education",className:"input-field mt-1",placeholder:"Degree, Institution",value:e.education,onChange:handleChange})]})]}),"mentor"===e.type&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("label",{htmlFor:"experience",className:"block text-sm font-medium text-gray-700",children:"Professional Experience"}),(0,s.jsx)("textarea",{name:"experience",id:"experience",rows:3,className:"input-field mt-1",placeholder:"Describe your professional background...",value:e.experience,onChange:handleChange})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("label",{htmlFor:"expertise",className:"block text-sm font-medium text-gray-700",children:"Areas of Expertise (comma-separated)"}),(0,s.jsx)("input",{type:"text",name:"expertise",id:"expertise",className:"input-field mt-1",placeholder:"e.g., Software Engineering, Business, Finance",value:e.expertise,onChange:handleChange})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("label",{htmlFor:"languages",className:"block text-sm font-medium text-gray-700",children:"Languages (comma-separated)"}),(0,s.jsx)("input",{type:"text",name:"languages",id:"languages",className:"input-field mt-1",placeholder:"e.g., English, Kinyarwanda, French",value:e.languages,onChange:handleChange})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("label",{htmlFor:"availability",className:"block text-sm font-medium text-gray-700",children:"Availability"}),(0,s.jsx)("input",{type:"text",name:"availability",id:"availability",className:"input-field mt-1",placeholder:"e.g., Weekends, Evenings, Flexible",value:e.availability,onChange:handleChange})]})]}),"mentee"===e.type&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("label",{htmlFor:"goals",className:"block text-sm font-medium text-gray-700",children:"Career Goals (comma-separated)"}),(0,s.jsx)("input",{type:"text",name:"goals",id:"goals",className:"input-field mt-1",placeholder:"e.g., Software Developer, Entrepreneur, Data Scientist",value:e.goals,onChange:handleChange})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("label",{htmlFor:"interests",className:"block text-sm font-medium text-gray-700",children:"Areas of Interest (comma-separated)"}),(0,s.jsx)("input",{type:"text",name:"interests",id:"interests",className:"input-field mt-1",placeholder:"e.g., Technology, Business, Healthcare",value:e.interests,onChange:handleChange})]})]})]}),c&&(0,s.jsx)("div",{className:"text-red-600 text-sm text-center",children:c}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)(o(),{href:"/login",className:"btn-secondary",children:"Already have an account? Sign in"}),(0,s.jsx)("button",{type:"submit",disabled:a,className:"btn-primary",children:a?"Creating account...":"Create Account"})]})]})]})})}},1396:function(e,t,a){e.exports=a(8326)}},function(e){e.O(0,[42,971,472,744],function(){return e(e.s=7504)}),_N_E=e.O()}]);