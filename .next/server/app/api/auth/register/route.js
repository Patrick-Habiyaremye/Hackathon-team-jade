"use strict";(()=>{var e={};e.id=2,e.ids=[2],e.modules={3524:e=>{e.exports=require("@prisma/client")},6517:e=>{e.exports=require("lodash")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},2781:e=>{e.exports=require("stream")},3837:e=>{e.exports=require("util")},3797:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>g,originalPathname:()=>x,requestAsyncStorage:()=>p,routeModule:()=>l,serverHooks:()=>c,staticGenerationAsyncStorage:()=>d,staticGenerationBailout:()=>m});var a={};t.r(a),t.d(a,{POST:()=>POST});var i=t(884),s=t(6132),o=t(5798),n=t(5204),u=t(8192);async function POST(e){try{let r=await e.json(),{email:t,password:a,firstName:i,lastName:s,type:l,...p}=r;if(!t||!a||!i||!s||!l)return o.Z.json({message:"All required fields must be provided"},{status:400});let d=await n._.user.findUnique({where:{email:t}});if(d)return o.Z.json({message:"User already exists"},{status:400});let c=await (0,u.c_)(a),g=await n._.user.create({data:{email:t,password:c,firstName:i,lastName:s,role:l.toUpperCase()}});"mentor"===l?(await n._.mentorProfile.create({data:{userId:g.id,bio:p.bio||"",expertise:Array.isArray(p.expertise)?p.expertise.join(","):p.expertise||"",languages:Array.isArray(p.languages)?p.languages.join(","):p.languages||"",availability:p.availability||"",experience:p.experience||"",education:p.education||"",location:p.location||"",isApproved:!1}}),await n._.mentorApplication.create({data:{userId:g.id,message:p.bio||"I would like to become a mentor to help Rwandan youth."}})):"mentee"===l&&await n._.menteeProfile.create({data:{userId:g.id,bio:p.bio||"",goals:Array.isArray(p.goals)?p.goals.join(","):p.goals||"",interests:Array.isArray(p.interests)?p.interests.join(","):p.interests||"",location:p.location||"",education:p.education||""}});let m=(0,u.RA)(g.id),{password:x,...y}=g;return o.Z.json({message:"Registration successful",token:m,user:y})}catch(e){return console.error("Registration error:",e),o.Z.json({message:"Internal server error"},{status:500})}}let l=new i.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/auth/register/route",pathname:"/api/auth/register",filename:"route",bundlePath:"app/api/auth/register/route"},resolvedPagePath:"C:\\Project\\Diaspora1\\Hackathon-team-jade\\app\\api\\auth\\register\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:p,staticGenerationAsyncStorage:d,serverHooks:c,headerHooks:g,staticGenerationBailout:m}=l,x="/api/auth/register/route"}};var r=require("../../../../webpack-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[386,390],()=>__webpack_exec__(3797));module.exports=t})();