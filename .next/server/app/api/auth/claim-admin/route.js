"use strict";(()=>{var e={};e.id=236,e.ids=[236],e.modules={3524:e=>{e.exports=require("@prisma/client")},6517:e=>{e.exports=require("lodash")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},2781:e=>{e.exports=require("stream")},3837:e=>{e.exports=require("util")},3158:(e,a,r)=>{r.r(a),r.d(a,{headerHooks:()=>c,originalPathname:()=>h,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>p,staticGenerationAsyncStorage:()=>l,staticGenerationBailout:()=>w});var t={};r.r(t),r.d(t,{POST:()=>POST});var i=r(884),s=r(6132),n=r(5798),o=r(5204),u=r(8192);async function POST(e){try{let{email:a,code:r}=await e.json();if(!a||!r)return n.Z.json({message:"Email and code are required"},{status:400});if("ndamukundavainqueur@gmail.com"!==a||"1234@"!==r)return n.Z.json({message:"Invalid admin credentials"},{status:401});let t=await o._.user.findFirst({where:{isAdmin:!0}});if(t)return n.Z.json({message:"Admin already exists"},{status:400});let i=await o._.user.findUnique({where:{email:a}});if(i)i=await o._.user.update({where:{id:i.id},data:{isAdmin:!0,role:"ADMIN",adminVerifiedAt:new Date}});else{let e=await (0,u.c_)("admin123");i=await o._.user.create({data:{email:a,password:e,firstName:"Admin",lastName:"User",role:"ADMIN",isAdmin:!0,adminVerifiedAt:new Date}})}let s=(0,u.RA)(i.id),{password:d,...m}=i;return n.Z.json({message:"Admin access granted",token:s,user:m})}catch(e){return console.error("Admin claim error:",e),n.Z.json({message:"Internal server error"},{status:500})}}let d=new i.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/auth/claim-admin/route",pathname:"/api/auth/claim-admin",filename:"route",bundlePath:"app/api/auth/claim-admin/route"},resolvedPagePath:"C:\\Project\\Diaspora1\\Hackathon-team-jade\\app\\api\\auth\\claim-admin\\route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:m,staticGenerationAsyncStorage:l,serverHooks:p,headerHooks:c,staticGenerationBailout:w}=d,h="/api/auth/claim-admin/route"}};var a=require("../../../../webpack-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),r=a.X(0,[386,390],()=>__webpack_exec__(3158));module.exports=r})();